<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style_bootstrap.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/code.css">
    <link href="https://cdn.prod.website-files.com/5efdb54f07a6812bcd95cc65/6773d0fc3013e060f08d7145_favicon.jpg"
        rel="shortcut icon" type="image/x-icon">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>Gun 2: Yaygin SQL Veri Tipleri - Pratik Ornekler</title>
    <style>
        code {
            white-space: pre-wrap;
        }

        span.smallcaps {
            font-variant: small-caps;
        }

        span.underline {
            text-decoration: underline;
        }

        div.column {
            display: inline-block;
            vertical-align: top;
            width: 50%;
        }

        div.hanging-indent {
            margin-left: 1.5em;
            text-indent: -1.5em;
        }

        ul.task-list {
            list-style: none;
        }

        .exercise-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .exercise-box h4 {
            color: #495057;
            margin-bottom: 15px;
        }

        .solution-box {
            background-color: #e7f3ff;
            border: 1px solid #b8daff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .solution-box.show {
            display: block;
        }

        .toggle-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        .toggle-btn:hover {
            background-color: #0056b3;
        }

        .hint-box {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .hint-box::before {
            content: "Ipucu: ";
            font-weight: bold;
        }

        .warning-box {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .warning-box::before {
            content: "Uyari: ";
            font-weight: bold;
        }

        .concept-box {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .concept-box::before {
            content: "Kavram: ";
            font-weight: bold;
        }

        .challenge-box {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .challenge-box h4 {
            color: #155724;
        }

        .challenge-box::before {
            content: "Meydan Okuma: ";
            font-weight: bold;
        }

        .dataset-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        .dataset-table th,
        .dataset-table td {
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            text-align: left;
        }

        .dataset-table th {
            background-color: #343a40;
            color: white;
        }

        .dataset-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .comparison-table th,
        .comparison-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }

        .comparison-table th {
            background-color: #007bff;
            color: white;
        }

        .comparison-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .type-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin: 2px;
        }

        .type-numeric {
            background-color: #d4edda;
            color: #155724;
        }

        .type-string {
            background-color: #cce5ff;
            color: #004085;
        }

        .type-date {
            background-color: #fff3cd;
            color: #856404;
        }

        .type-boolean {
            background-color: #f8d7da;
            color: #721c24;
        }

        .type-json {
            background-color: #e2d5f1;
            color: #563d7c;
        }

        .result-box {
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
        }

        .language-switcher {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px 20px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .language-switcher a {
            margin: 0 10px;
            text-decoration: none;
            color: #007bff;
        }

        .language-switcher a:hover {
            text-decoration: underline;
        }

        .language-switcher a.active {
            font-weight: bold;
            color: #343a40;
        }
    </style>
</head>

<body>
    <a href="../index_tr.html" class="back-button">‚Üê Anasayfaya Don</a>
    <div class="copy-notification" id="copyNotification">Kopyalandi!</div>

    <div id="europeanunion-turkey">
        <img src="../static/eu.png" alt="">
    </div>
    <div id="sanayiteknolojibakan">
        <img src="../static/sanayitek.png" alt="">
    </div>
    <div id="rekabet">
        <img src="../static/rekabet.png" alt="">
    </div>
    <div id="tisk">
        <img src="../static/tisk.png" alt="">
    </div>
    <div id="undp">
        <img src="../static/undp.png" alt="">
    </div>
    <div class="content-container">
        <div class="container">
            <div class="language-switcher">
                <a href="02_common_sql_data_types_examples.html">English</a> |
                <a href="02_common_sql_data_types_examples_tr.html" class="active">Turkce</a>
            </div>

            <section>
                <h1 id="data-types-practical-examples">Yaygin SQL Veri Tipleri - Pratik Ornekler</h1>
                <p><a href="02_common_sql_data_types.html">&larr; Yaygin SQL Veri Tipleri Dersine Don</a></p>
                <p>Bu sayfa, SQL veri tiplerinde ustalasmak icin uygulamali alistirmalar sunmaktadir. Dogru veri tipini
                    secme, tip donusumleriyle calisma ve tipe ozgu davranislari anlama konularinda pratik yapin.</p>
            </section>

            <!-- Ornek Veri Setleri Bolumu -->
            <section>
                <h2 id="sample-datasets">Ornek Veri Setleri</h2>
                <p>Asagidaki tablolar farkli veri tiplerini uygulamada gostermektedir. Alistirmalar icin bunlari
                    referans olarak kullanin.</p>

                <h4>products Tablosu</h4>
                <p>Cesitli sayisal ve metin veri tiplerini gosterir:</p>
                <table class="dataset-table">
                    <thead>
                        <tr>
                            <th>product_id<br><span class="type-badge type-numeric">INTEGER</span></th>
                            <th>name<br><span class="type-badge type-string">VARCHAR(100)</span></th>
                            <th>sku<br><span class="type-badge type-string">CHAR(10)</span></th>
                            <th>price<br><span class="type-badge type-numeric">DECIMAL(10,2)</span></th>
                            <th>weight_kg<br><span class="type-badge type-numeric">REAL</span></th>
                            <th>is_active<br><span class="type-badge type-boolean">BOOLEAN</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Laptop Pro 15</td>
                            <td>LAP-001</td>
                            <td>1299.99</td>
                            <td>2.1</td>
                            <td>TRUE</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Wireless Mouse</td>
                            <td>MOU-002</td>
                            <td>29.50</td>
                            <td>0.085</td>
                            <td>TRUE</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>USB-C Hub</td>
                            <td>HUB-003</td>
                            <td>49.99</td>
                            <td>0.15</td>
                            <td>FALSE</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Monitor 27"</td>
                            <td>MON-004</td>
                            <td>399.00</td>
                            <td>5.5</td>
                            <td>TRUE</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Keyboard Mechanical</td>
                            <td>KEY-005</td>
                            <td>89.99</td>
                            <td>0.95</td>
                            <td>TRUE</td>
                        </tr>
                    </tbody>
                </table>

                <h4>events Tablosu</h4>
                <p>Tarih ve saat veri tiplerini gosterir:</p>
                <table class="dataset-table">
                    <thead>
                        <tr>
                            <th>event_id<br><span class="type-badge type-numeric">INTEGER</span></th>
                            <th>event_name<br><span class="type-badge type-string">VARCHAR(100)</span></th>
                            <th>event_date<br><span class="type-badge type-date">DATE</span></th>
                            <th>start_time<br><span class="type-badge type-date">TIME</span></th>
                            <th>created_at<br><span class="type-badge type-date">TIMESTAMP</span></th>
                            <th>duration<br><span class="type-badge type-date">INTERVAL</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>SQL Workshop</td>
                            <td>2024-03-15</td>
                            <td>09:00:00</td>
                            <td>2024-03-01 10:30:00</td>
                            <td>3 hours</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Database Design</td>
                            <td>2024-03-20</td>
                            <td>14:00:00</td>
                            <td>2024-03-05 14:15:00</td>
                            <td>2 hours</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Team Meeting</td>
                            <td>2024-03-18</td>
                            <td>10:30:00</td>
                            <td>2024-03-10 09:00:00</td>
                            <td>1 hour 30 minutes</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Code Review</td>
                            <td>2024-03-22</td>
                            <td>16:00:00</td>
                            <td>2024-03-12 11:45:00</td>
                            <td>1 hour</td>
                        </tr>
                    </tbody>
                </table>

                <h4>user_profiles Tablosu (JSON ornegi)</h4>
                <p>JSON veri tipi kullanimini gosterir:</p>
                <table class="dataset-table">
                    <thead>
                        <tr>
                            <th>user_id<br><span class="type-badge type-numeric">INTEGER</span></th>
                            <th>username<br><span class="type-badge type-string">VARCHAR(50)</span></th>
                            <th>preferences<br><span class="type-badge type-json">JSONB</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>john_doe</td>
                            <td>{"theme": "dark", "language": "en", "notifications": true}</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>jane_smith</td>
                            <td>{"theme": "light", "language": "fr", "notifications": false}</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>bob_wilson</td>
                            <td>{"theme": "dark", "language": "en", "notifications": true, "timezone": "UTC"}</td>
                        </tr>
                    </tbody>
                </table>

                <h4>financial_data Tablosu</h4>
                <p>DECIMAL ve FLOAT arasindaki hassasiyet farklarini gosterir:</p>
                <table class="dataset-table">
                    <thead>
                        <tr>
                            <th>id<br><span class="type-badge type-numeric">INTEGER</span></th>
                            <th>description<br><span class="type-badge type-string">VARCHAR(50)</span></th>
                            <th>decimal_value<br><span class="type-badge type-numeric">DECIMAL(15,4)</span></th>
                            <th>float_value<br><span class="type-badge type-numeric">FLOAT</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Monthly Revenue</td>
                            <td>123456.7890</td>
                            <td>123456.7890</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Tax Rate</td>
                            <td>0.0825</td>
                            <td>0.0825</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Interest Calc</td>
                            <td>0.1000</td>
                            <td>0.1</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Alistirma 1: Dogru Veri Tipini Secme -->
            <section>
                <h2 id="exercise-1">Alistirma 1: Dogru Veri Tipini Secme</h2>
                <p>Her sutun icin uygun veri tipini secmek kritik bir beceridir. Depolama verimliligi, veri butunlugu ve
                    sorgu performansini goz onunde bulundurun.</p>

                <div class="concept-box">
                    Verilerinize uyan en spesifik tipi kullanin. Sayilar icin <code>INTEGER</code>, para icin
                    <code>DECIMAL</code>, degisken metin icin <code>VARCHAR</code>, sadece tarihler icin
                    <code>DATE</code>.
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 1.1: Tablo Semasi Tasarlama</h4>
                    <p>Asagidaki alanlari iceren calisan bilgilerini depolamak icin bir tablo olusturmaniz gerekiyor:</p>
                    <ul>
                        <li>Calisan ID (benzersiz tanimlayici, otomatik olusturulan)</li>
                        <li>Ad (en fazla 50 karakter)</li>
                        <li>Soyad (en fazla 50 karakter)</li>
                        <li>E-posta (en fazla 100 karakter)</li>
                        <li>Maas (2 ondalik basamakli kesin miktar, milyonlara kadar)</li>
                        <li>Ise Baslama Tarihi</li>
                        <li>Tam Zamanli mi (evet/hayir)</li>
                        <li>Departman Kodu (her zaman tam olarak 4 karakter)</li>
                    </ul>
                    <p><strong>Uygun veri tipleriyle CREATE TABLE ifadesini yazin.</strong></p>

                    <div class="hint-box">
                        Dusunun: Departman kodu CHAR mi yoksa VARCHAR mi olmali? Maas icin ne kadar hassasiyet
                        gerekiyor?
                    </div>

                    <button class="toggle-btn" onclick="toggleSolution('solution1_1')">Cozumu Goster</button>
                    <div id="solution1_1" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL sozdizimi
CREATE TABLE employees (
    employee_id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    salary DECIMAL(10, 2) NOT NULL,  -- 99,999,999.99'a kadar
    hire_date DATE NOT NULL,
    is_full_time BOOLEAN DEFAULT TRUE,
    department_code CHAR(4) NOT NULL  -- Sabit 4 karakter
);

-- MySQL sozdizimi
CREATE TABLE employees (
    employee_id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    salary DECIMAL(10, 2) NOT NULL,
    hire_date DATE NOT NULL,
    is_full_time BOOLEAN DEFAULT TRUE,
    department_code CHAR(4) NOT NULL
);

-- SQL Server sozdizimi
CREATE TABLE employees (
    employee_id INT IDENTITY(1,1) PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    salary DECIMAL(10, 2) NOT NULL,
    hire_date DATE NOT NULL,
    is_full_time BIT DEFAULT 1,
    department_code CHAR(4) NOT NULL
);</code></pre>
                        <p><strong>Aciklama:</strong></p>
                        <ul>
                            <li><code>CHAR(4)</code> department_code icin cunku her zaman tam olarak 4 karakter</li>
                            <li><code>VARCHAR</code> isimler/e-posta icin cunku uzunluklar degisiyor</li>
                            <li><code>DECIMAL(10,2)</code> kesin para hesaplamalari icin</li>
                            <li><code>DATE</code> hire_date icin (zaman bileseni gerekmiyor)</li>
                            <li><code>BOOLEAN</code> is_full_time icin (SQL Server BIT kullanir)</li>
                        </ul>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 1.2: Veri Tipi Problemlerini Belirleme</h4>
                    <p>Asagidaki tablo taniminda birkac veri tipi sorunu var. Bunlari belirleyin ve duzultin:</p>
                    <pre><code class="language-sql">CREATE TABLE orders (
    order_id VARCHAR(20),          -- Problem?
    customer_name TEXT,            -- Problem?
    order_total FLOAT,             -- Problem?
    quantity VARCHAR(10),          -- Problem?
    order_date VARCHAR(20),        -- Problem?
    is_shipped VARCHAR(5)          -- Problem?
);</code></pre>

                    <button class="toggle-btn" onclick="toggleSolution('solution1_2')">Cozumu Goster</button>
                    <div id="solution1_2" class="solution-box">
                        <pre><code class="language-sql">-- Duzeltilmis tablo tanimi
CREATE TABLE orders (
    order_id INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    -- VARCHAR idi: ID'ler verimlilik ve otomatik olusturma icin sayisal olmali

    customer_name VARCHAR(100) NOT NULL,
    -- TEXT idi: Isimler icin sinirli VARCHAR daha uygun

    order_total DECIMAL(12, 2) NOT NULL,
    -- FLOAT idi: Finansal veriler kesin hassasiyet gerektirir

    quantity INTEGER NOT NULL CHECK (quantity > 0),
    -- VARCHAR idi: Miktarlar sayi, metin degil

    order_date DATE NOT NULL,
    -- VARCHAR idi: Tarihler dogrulama ve fonksiyonlar icin DATE tipi kullanmali

    is_shipped BOOLEAN DEFAULT FALSE
    -- VARCHAR idi: Boolean degerler BOOLEAN tipi kullanmali
);</code></pre>
                        <p><strong>Belirlenen sorunlar:</strong></p>
                        <ul>
                            <li><strong>order_id</strong>: VARCHAR kullanmak otomatik artisi engeller ve daha az
                                verimlidir</li>
                            <li><strong>customer_name</strong>: TEXT asiridir; makul sinirli VARCHAR daha iyidir</li>
                            <li><strong>order_total</strong>: FLOAT para ile yuvarlama hatalarina neden olur</li>
                            <li><strong>quantity</strong>: Sayilari metin olarak saklamak aritmetik islemleri engeller
                            </li>
                            <li><strong>order_date</strong>: Metin tarihler tarih fonksiyonlarini kullanamazlar veya
                                dogrulanamaz</li>
                            <li><strong>is_shipped</strong>: Metin olarak saklanan boolean degerler yer israf eder ve
                                hataya aciktir</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Alistirma 2: Sayisal Tip Hassasiyeti -->
            <section>
                <h2 id="exercise-2">Alistirma 2: Sayisal Tip Hassasiyeti</h2>
                <p>Kesin ve yaklasik sayisal tipler arasindaki farki anlamak finansal uygulamalar icin kritiktir.</p>

                <div class="warning-box">
                    Finansal hesaplamalar icin asla FLOAT veya REAL kullanmayin! Kayan noktali tipler yuvarlama
                    hatalarina neden olabilir.
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 2.1: Hassasiyet Karsilastirmasi</h4>
                    <p>Bu sorguyu calistirin ve DECIMAL ile FLOAT arasindaki farki gozlemleyin:</p>
                    <pre><code class="language-sql">-- PostgreSQL / MySQL
SELECT
    0.1 + 0.2 AS float_result,
    CAST(0.1 AS DECIMAL(10,2)) + CAST(0.2 AS DECIMAL(10,2)) AS decimal_result;

-- Ne bekliyorsunuz? Ne elde ediyorsunuz?</code></pre>
                    <p><strong>Soru:</strong> Her hesaplama icin hangi sonucu bekliyorsunuz?</p>

                    <button class="toggle-btn" onclick="toggleSolution('solution2_1')">Cozumu Goster</button>
                    <div id="solution2_1" class="solution-box">
                        <div class="result-box">
                            float_result: 0.30000000000000004 (yaklasik)
                            decimal_result: 0.30 (kesin)
                        </div>
                        <p><strong>Aciklama:</strong> Kayan noktali hesaplama, ondalik kesirlerin ikili temsili
                            nedeniyle kucuk bir hata uretir. DECIMAL kesin hassasiyeti korur.</p>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 2.2: Vergiyle Toplam Hesaplama</h4>
                    <p><code>products</code> tablosunu kullanarak, %8.25 vergi dahil toplam fiyati hesaplayin. Dogru
                        hassasiyeti kullandiginizdan emin olun.</p>
                    <p><strong>Asagidakileri gosteren bir sorgu yazin:</strong></p>
                    <ul>
                        <li>Urun adi, orijinal fiyat</li>
                        <li>Vergi tutari (2 ondalik basamaga yuvarlanmis)</li>
                        <li>Vergi dahil toplam fiyat</li>
                    </ul>

                    <div class="hint-box">
                        Sonuclarinizda 2 ondalik basamak saglamak icin ROUND() veya CAST() kullanin.
                    </div>

                    <button class="toggle-btn" onclick="toggleSolution('solution2_2')">Cozumu Goster</button>
                    <div id="solution2_2" class="solution-box">
                        <pre><code class="language-sql">SELECT
    name,
    price,
    ROUND(price * 0.0825, 2) AS tax_amount,
    ROUND(price * 1.0825, 2) AS total_with_tax
FROM products
WHERE is_active = TRUE
ORDER BY price DESC;</code></pre>
                        <p><strong>Beklenen Sonuclar:</strong></p>
                        <table class="dataset-table">
                            <tr>
                                <th>name</th>
                                <th>price</th>
                                <th>tax_amount</th>
                                <th>total_with_tax</th>
                            </tr>
                            <tr>
                                <td>Laptop Pro 15</td>
                                <td>1299.99</td>
                                <td>107.25</td>
                                <td>1407.24</td>
                            </tr>
                            <tr>
                                <td>Monitor 27"</td>
                                <td>399.00</td>
                                <td>32.92</td>
                                <td>431.92</td>
                            </tr>
                            <tr>
                                <td>Keyboard Mechanical</td>
                                <td>89.99</td>
                                <td>7.42</td>
                                <td>97.41</td>
                            </tr>
                            <tr>
                                <td>Wireless Mouse</td>
                                <td>29.50</td>
                                <td>2.43</td>
                                <td>31.93</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 2.3: Tamsayi Bolmesi ve Ondalik Bolme</h4>
                    <p>Bu iki sorgu arasindaki fark nedir?</p>
                    <pre><code class="language-sql">-- Sorgu A
SELECT 5 / 2 AS result_a;

-- Sorgu B
SELECT 5.0 / 2 AS result_b;

-- Sorgu C
SELECT CAST(5 AS DECIMAL) / 2 AS result_c;</code></pre>
                    <p><strong>Soru:</strong> Her sorgu hangi sonucu dondurur?</p>

                    <button class="toggle-btn" onclick="toggleSolution('solution2_3')">Cozumu Goster</button>
                    <div id="solution2_3" class="solution-box">
                        <div class="result-box">
                            result_a: 2 (tamsayi bolmesi keser)
                            result_b: 2.5 (ondalik bolme kesiri korur)
                            result_c: 2.5 (acik donusum ondaliga)
                        </div>
                        <p><strong>Aciklama:</strong></p>
                        <ul>
                            <li>Tamsayi / Tamsayi = Tamsayi (kesir atilir)</li>
                            <li>Eger operandlardan biri ondalik/kayan noktali ise, sonuc ondalik/kayan noktali olur</li>
                            <li>Tamsayi degerlerden ondalik sonuclar gerektiginde acik CAST kullanin</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Alistirma 3: Metin Veri Tipleri -->
            <section>
                <h2 id="exercise-3">Alistirma 3: Metin Veri Tipleri</h2>
                <p>CHAR ile VARCHAR'i ne zaman kullanacaginizi ve metin verileriyle nasil calisacaginizi anlama.</p>

                <div class="concept-box">
                    <code>CHAR(n)</code> kisa metinleri boslukla doldurur. <code>VARCHAR(n)</code> sadece gercek
                    karakterleri saklar. CHAR'i sadece veri her zaman tam olarak ayni uzunlukta oldugunda kullanin.
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 3.1: CHAR Doldurma Davranisi</h4>
                    <p>CHAR'in kisa metinleri nasil isledigini gozlemleyin:</p>
                    <pre><code class="language-sql">-- Test tablosu olustur
CREATE TABLE char_test (
    fixed_code CHAR(10),
    variable_code VARCHAR(10)
);

INSERT INTO char_test VALUES ('ABC', 'ABC');

-- Farki gormek icin sorgu
SELECT
    fixed_code,
    LENGTH(fixed_code) AS char_length,
    variable_code,
    LENGTH(variable_code) AS varchar_length
FROM char_test;</code></pre>
                    <p><strong>Soru:</strong> Hangi uzunluklari bekliyorsunuz?</p>

                    <button class="toggle-btn" onclick="toggleSolution('solution3_1')">Cozumu Goster</button>
                    <div id="solution3_1" class="solution-box">
                        <div class="result-box">
                            fixed_code: 'ABC       ' (sondaki bosluklar ile)
                            char_length: 10 (veya bazi DB'lerde kirir 3)
                            variable_code: 'ABC'
                            varchar_length: 3
                        </div>
                        <p><strong>Not:</strong> Davranis veritabanina gore degisir:</p>
                        <ul>
                            <li><strong>PostgreSQL</strong>: CHAR doldurulur, ama LENGTH() sondaki bosluklari yok sayar
                            </li>
                            <li><strong>MySQL</strong>: Sondaki bosluklar CHAR degerlerini alirken kaldirilir</li>
                            <li><strong>SQL Server</strong>: CHAR dolguyu icerir, LEN() sondaki bosluklari yok sayar,
                                DATALENGTH() icerir</li>
                        </ul>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 3.2: CHAR ile Metin Karsilastirmasi</h4>
                    <p>CHAR degerlerini karsilastirdiginizda ne olur?</p>
                    <pre><code class="language-sql">-- Bu TRUE mu yoksa FALSE mi dondurur?
SELECT
    CASE WHEN 'ABC'::CHAR(10) = 'ABC'::VARCHAR(10)
         THEN 'Esit'
         ELSE 'Esit Degil'
    END AS comparison_result;</code></pre>

                    <button class="toggle-btn" onclick="toggleSolution('solution3_2')">Cozumu Goster</button>
                    <div id="solution3_2" class="solution-box">
                        <p><strong>Sonuc veritabanina gore degisir:</strong></p>
                        <ul>
                            <li><strong>PostgreSQL</strong>: 'Esit' - sondaki bosluklar karsilastirmalarda yok sayilir
                            </li>
                            <li><strong>MySQL</strong>: 'Esit' - sondaki bosluklar varsayilan olarak yok sayilir</li>
                            <li><strong>SQL Server</strong>: 'Esit' - ANSI dolgu kurallarini kullanir</li>
                        </ul>
                        <p><strong>En Iyi Uygulama:</strong> Ortuk davranisa guvenmeyin. Doldurma sorun olabilirse
                            metinleri karsilastirirken acikca TRIM() kullanin.</p>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 3.3: Farkli Veri Tipleriyle Desen Eslestirme</h4>
                    <p><code>products</code> tablosunu kullanarak asagidaki sorgulari yazin:</p>
                    <ol>
                        <li>SKU'su 'MON' veya 'MOU' ile baslayan urunleri bulun</li>
                        <li>Adinda sayi iceren urunleri bulun</li>
                        <li>SKU'su '3', '4' veya '5' ile biten urunleri bulun</li>
                    </ol>

                    <button class="toggle-btn" onclick="toggleSolution('solution3_3')">Cozumu Goster</button>
                    <div id="solution3_3" class="solution-box">
                        <pre><code class="language-sql">-- 1. SKU 'MON' veya 'MOU' ile baslar
SELECT name, sku
FROM products
WHERE sku LIKE 'MON%' OR sku LIKE 'MOU%';
-- Veya duzensiz ifade kullanarak (PostgreSQL):
-- WHERE sku ~ '^MO[NU]'

-- 2. Sayi iceren adlar
SELECT name, sku
FROM products
WHERE name ~ '[0-9]';  -- PostgreSQL
-- MySQL: WHERE name REGEXP '[0-9]'
-- SQL Server: WHERE name LIKE '%[0-9]%'

-- 3. SKU 3, 4 veya 5 ile biter
SELECT name, sku
FROM products
WHERE sku LIKE '%-00[345]';
-- Veya: WHERE RIGHT(sku, 1) IN ('3', '4', '5')</code></pre>
                        <p><strong>Sorgu 1 icin sonuclar:</strong></p>
                        <table class="dataset-table">
                            <tr>
                                <th>name</th>
                                <th>sku</th>
                            </tr>
                            <tr>
                                <td>Wireless Mouse</td>
                                <td>MOU-002</td>
                            </tr>
                            <tr>
                                <td>Monitor 27"</td>
                                <td>MON-004</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Alistirma 4: Tarih ve Saat Tipleri -->
            <section>
                <h2 id="exercise-4">Alistirma 4: Tarih ve Saat Tipleri</h2>
                <p>Zamansal verilerle calismak DATE, TIME, TIMESTAMP ve INTERVAL tiplerini anlamayi gerektirir.</p>

                <div class="concept-box">
                    Saat dilimi belirsizliginden kacinmak icin cogu zaman damgasi ihtiyaci icin
                    <code>TIMESTAMP WITH TIME ZONE</code> kullanin. UTC'de saklayin ve gosterim icin donusturun.
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 4.1: Tarih Cikarma ve Bicimlendirme</h4>
                    <p><code>events</code> tablosunu kullanarak asagidaki sorgulari yazin:</p>
                    <ol>
                        <li>event_date'den yil, ay ve gunu cikarin</li>
                        <li>Her etkinlik icin haftanin gununu alin</li>
                        <li>Tarihi 'Ay GG, YYYY' olarak bicimleyin (ornegin, 'March 15, 2024')</li>
                    </ol>

                    <button class="toggle-btn" onclick="toggleSolution('solution4_1')">Cozumu Goster</button>
                    <div id="solution4_1" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
SELECT
    event_name,
    event_date,
    EXTRACT(YEAR FROM event_date) AS year,
    EXTRACT(MONTH FROM event_date) AS month,
    EXTRACT(DAY FROM event_date) AS day,
    TO_CHAR(event_date, 'Day') AS day_of_week,
    TO_CHAR(event_date, 'Month DD, YYYY') AS formatted_date
FROM events;

-- MySQL
SELECT
    event_name,
    event_date,
    YEAR(event_date) AS year,
    MONTH(event_date) AS month,
    DAY(event_date) AS day,
    DAYNAME(event_date) AS day_of_week,
    DATE_FORMAT(event_date, '%M %d, %Y') AS formatted_date
FROM events;

-- SQL Server
SELECT
    event_name,
    event_date,
    YEAR(event_date) AS year,
    MONTH(event_date) AS month,
    DAY(event_date) AS day,
    DATENAME(WEEKDAY, event_date) AS day_of_week,
    FORMAT(event_date, 'MMMM dd, yyyy') AS formatted_date
FROM events;</code></pre>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 4.2: Tarih Aritmetigi</h4>
                    <p><code>events</code> tablosunu kullanarak:</p>
                    <ol>
                        <li>Her etkinlige kac gun kaldigini hesaplayin (bugundan itibaren)</li>
                        <li>Etkinlik tarihinden 5 gundan fazla once olusturulan etkinlikleri bulun</li>
                        <li>Her etkinligin bitis saatini hesaplayin (start_time + duration)</li>
                    </ol>

                    <button class="toggle-btn" onclick="toggleSolution('solution4_2')">Cozumu Goster</button>
                    <div id="solution4_2" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
-- 1. Her etkinlige kalan gunler
SELECT
    event_name,
    event_date,
    event_date - CURRENT_DATE AS days_until
FROM events;

-- 2. Etkinlik tarihinden 5 gundan fazla once olusturulan etkinlikler
SELECT
    event_name,
    created_at::DATE AS created_date,
    event_date,
    event_date - created_at::DATE AS days_before
FROM events
WHERE event_date - created_at::DATE > 5;

-- 3. Bitis saatini hesapla
SELECT
    event_name,
    start_time,
    duration,
    start_time + duration AS end_time
FROM events;

-- MySQL
-- 1. Her etkinlige kalan gunler
SELECT
    event_name,
    event_date,
    DATEDIFF(event_date, CURDATE()) AS days_until
FROM events;

-- 2. 5 gundan fazla once olusturulan etkinlikler
SELECT
    event_name,
    DATE(created_at) AS created_date,
    event_date,
    DATEDIFF(event_date, DATE(created_at)) AS days_before
FROM events
WHERE DATEDIFF(event_date, DATE(created_at)) > 5;</code></pre>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 4.3: Saat Dilimli Zaman Damgasi</h4>
                    <p>Saat dilimi islemesini anlama:</p>
                    <pre><code class="language-sql">-- PostgreSQL: Farkli dilimlerde mevcut zamani goster
SELECT
    CURRENT_TIMESTAMP AS server_time,
    CURRENT_TIMESTAMP AT TIME ZONE 'UTC' AS utc_time,
    CURRENT_TIMESTAMP AT TIME ZONE 'America/New_York' AS new_york_time,
    CURRENT_TIMESTAMP AT TIME ZONE 'Europe/Istanbul' AS istanbul_time;</code></pre>
                    <p><strong>Soru:</strong> UTC 15:00 ise, Istanbul'da (UTC+3) saat kactir?</p>

                    <button class="toggle-btn" onclick="toggleSolution('solution4_3')">Cozumu Goster</button>
                    <div id="solution4_3" class="solution-box">
                        <div class="result-box">
                            UTC: 15:00
                            Istanbul (UTC+3): 18:00
                        </div>
                        <p><strong>En Iyi Uygulama:</strong></p>
                        <ul>
                            <li>Tum zaman damgalarini UTC'de saklayin</li>
                            <li>Sadece gosterim icin yerel saate donusturun</li>
                            <li>Saat dilimi bilgisini korumak icin <code>TIMESTAMP WITH TIME ZONE</code> kullanin</li>
                            <li>Uygulamaniz genelinde tutarli olun</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Alistirma 5: JSON Veri Tipi -->
            <section>
                <h2 id="exercise-5">Alistirma 5: JSON Veri Tipi</h2>
                <p>Modern veritabanlari yari yapilandirilmis verileri saklamak icin JSON'u destekler.</p>

                <div class="concept-box">
                    PostgreSQL <code>JSON</code> (metin) ve <code>JSONB</code> (ikili) sunar. Daha iyi performans ve
                    indeksleme yetenekleri icin JSONB kullanin.
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 5.1: JSON Verisini Sorgulama</h4>
                    <p><code>user_profiles</code> tablosunu kullanarak asagidaki sorgulari yazin:</p>
                    <ol>
                        <li>Tum kullanicilar icin tema tercihini alin</li>
                        <li>Bildirimleri etkin olan kullanicilari bulun</li>
                        <li>Saat dilimi ayari olan kullanicilari bulun</li>
                    </ol>

                    <button class="toggle-btn" onclick="toggleSolution('solution5_1')">Cozumu Goster</button>
                    <div id="solution5_1" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
-- 1. Tema tercihini al
SELECT
    username,
    preferences->>'theme' AS theme
FROM user_profiles;

-- 2. Bildirimleri etkin olan kullanicilar
SELECT username, preferences
FROM user_profiles
WHERE (preferences->>'notifications')::BOOLEAN = TRUE;
-- Veya: WHERE preferences @> '{"notifications": true}'

-- 3. Saat dilimi ayari olan kullanicilar
SELECT username, preferences->>'timezone' AS timezone
FROM user_profiles
WHERE preferences ? 'timezone';

-- MySQL
-- 1. Tema tercihini al
SELECT
    username,
    JSON_EXTRACT(preferences, '$.theme') AS theme
    -- Veya: preferences->>'$.theme'
FROM user_profiles;

-- 2. Bildirimleri etkin olan kullanicilar
SELECT username, preferences
FROM user_profiles
WHERE JSON_EXTRACT(preferences, '$.notifications') = true;

-- 3. Saat dilimi ayari olan kullanicilar
SELECT username, JSON_EXTRACT(preferences, '$.timezone') AS timezone
FROM user_profiles
WHERE JSON_CONTAINS_PATH(preferences, 'one', '$.timezone');</code></pre>
                    </div>
                </div>

                <div class="exercise-box">
                    <h4>Alistirma 5.2: JSON Verisini Degistirme</h4>
                    <p>Asagidakileri yapan sorgular yazin:</p>
                    <ol>
                        <li>Tum kullanici tercihlerine "weekly" degeriyle "email_digest" anahtari ekleyin</li>
                        <li>john_doe kullanicisi icin temayi "system" olarak guncelleyin</li>
                    </ol>

                    <button class="toggle-btn" onclick="toggleSolution('solution5_2')">Cozumu Goster</button>
                    <div id="solution5_2" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
-- 1. Tum kullanicilara yeni anahtar ekle
UPDATE user_profiles
SET preferences = preferences || '{"email_digest": "weekly"}'::jsonb;

-- 2. Belirli kullanici icin temayi guncelle
UPDATE user_profiles
SET preferences = jsonb_set(preferences, '{theme}', '"system"')
WHERE username = 'john_doe';

-- MySQL
-- 1. Tum kullanicilara yeni anahtar ekle
UPDATE user_profiles
SET preferences = JSON_SET(preferences, '$.email_digest', 'weekly');

-- 2. Belirli kullanici icin temayi guncelle
UPDATE user_profiles
SET preferences = JSON_SET(preferences, '$.theme', 'system')
WHERE username = 'john_doe';</code></pre>
                    </div>
                </div>
            </section>

            <!-- Zorluklu Alistirmalar -->
            <section>
                <h2 id="challenge-exercises">Zorluklu Alistirmalar</h2>
                <p>Bu ileri zorluklarla SQL veri tiplerini kapsamli anladiginizi test edin.</p>

                <div class="challenge-box">
                    <h4>Zorluk 1: Tam Bir Sema Tasarlayin</h4>
                    <p>Asagidakileri iceren bir e-ticaret siparis sistemi icin tablo semasi tasarlayin:</p>
                    <ul>
                        <li>Siparis ID (benzersiz tanimlayici)</li>
                        <li>Musteri e-postasi</li>
                        <li>Siparis ogelerileri (JSON dizisi olarak)</li>
                        <li>Ara toplam, vergi ve toplam (finansal degerler)</li>
                        <li>Siparis durumu (sinirli deger kumesi)</li>
                        <li>Gonderim adresi (yapilandirilmis veri)</li>
                        <li>Saat dilimli siparis zaman damgasi</li>
                        <li>Tahmini teslimat tarihi</li>
                        <li>Takip numarasi (istege bagli, alfanumerik)</li>
                    </ul>

                    <button class="toggle-btn" onclick="toggleSolution('challenge1')">Cozumu Goster</button>
                    <div id="challenge1" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
CREATE TABLE ecommerce_orders (
    order_id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    customer_email VARCHAR(255) NOT NULL,

    -- Siparis ogelerileri JSON dizisi olarak
    items JSONB NOT NULL,
    -- Ornek: [{"product_id": 1, "name": "Widget", "qty": 2, "price": 9.99}]

    -- Kesin hassasiyetli finansal degerler
    subtotal DECIMAL(12, 2) NOT NULL CHECK (subtotal >= 0),
    tax_amount DECIMAL(12, 2) NOT NULL CHECK (tax_amount >= 0),
    total DECIMAL(12, 2) NOT NULL CHECK (total >= 0),

    -- Kisitli degerlerle siparis durumu
    status VARCHAR(20) NOT NULL DEFAULT 'pending'
        CHECK (status IN ('pending', 'confirmed', 'processing',
                          'shipped', 'delivered', 'cancelled')),

    -- Yapilandirilmis JSON olarak gonderim adresi
    shipping_address JSONB NOT NULL,
    -- Ornek: {"street": "123 Main St", "city": "NYC", "zip": "10001", "country": "US"}

    -- Zaman damgalari
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,

    -- Teslimat tarihi (zaman bileseni gerekmiyor)
    estimated_delivery DATE,

    -- Istege bagli takip numarasi
    tracking_number VARCHAR(50)
);

-- Daha hizli sorgular icin JSONB'ye indeks ekle
CREATE INDEX idx_orders_items ON ecommerce_orders USING GIN (items);
CREATE INDEX idx_orders_status ON ecommerce_orders (status);
CREATE INDEX idx_orders_customer ON ecommerce_orders (customer_email);</code></pre>
                    </div>
                </div>

                <div class="challenge-box">
                    <h4>Zorluk 2: Tip Donusum Sorgusu</h4>
                    <p>Tum verilerin VARCHAR olarak saklandigi eski bir tablo verildiginde:</p>
                    <pre><code class="language-sql">CREATE TABLE legacy_data (
    id VARCHAR(10),
    amount VARCHAR(20),
    transaction_date VARCHAR(20),
    is_valid VARCHAR(5)
);</code></pre>
                    <p>Asagidakileri yapan bir sorgu yazin:</p>
                    <ul>
                        <li>id'yi INTEGER'a donustur</li>
                        <li>para birimi sembollerini duzgun islemeyle amount'u DECIMAL'a donustur</li>
                        <li>transaction_date'i duzgun DATE'e donustur</li>
                        <li>is_valid'i BOOLEAN'a donustur</li>
                        <li>NULL ve gecersiz degerleri zarif bir sekilde isle</li>
                    </ul>

                    <button class="toggle-btn" onclick="toggleSolution('challenge2')">Cozumu Goster</button>
                    <div id="challenge2" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
SELECT
    -- ID'yi donustur, gecerli tamsayi degilse NULL
    CASE
        WHEN id ~ '^\d+$' THEN id::INTEGER
        ELSE NULL
    END AS id,

    -- Para birimi sembollerini kaldir ve DECIMAL'a donustur
    CASE
        WHEN REGEXP_REPLACE(amount, '[^0-9.-]', '', 'g') ~ '^-?\d+\.?\d*$'
        THEN REGEXP_REPLACE(amount, '[^0-9.-]', '', 'g')::DECIMAL(12,2)
        ELSE NULL
    END AS amount,

    -- Tarih dizisini DATE'e donustur
    CASE
        WHEN transaction_date IS NOT NULL
        THEN TO_DATE(transaction_date, 'YYYY-MM-DD')
        ELSE NULL
    END AS transaction_date,

    -- Diziyi BOOLEAN'a donustur
    CASE
        WHEN LOWER(is_valid) IN ('true', 'yes', '1', 't', 'y') THEN TRUE
        WHEN LOWER(is_valid) IN ('false', 'no', '0', 'f', 'n') THEN FALSE
        ELSE NULL
    END AS is_valid
FROM legacy_data;

-- Eski veriden duzgun tipli yeni tablo olusturmak icin:
CREATE TABLE cleaned_data AS
SELECT
    NULLIF(REGEXP_REPLACE(id, '[^0-9]', '', 'g'), '')::INTEGER AS id,
    NULLIF(REGEXP_REPLACE(amount, '[^0-9.-]', '', 'g'), '')::DECIMAL(12,2) AS amount,
    TO_DATE(transaction_date, 'YYYY-MM-DD') AS transaction_date,
    LOWER(is_valid) IN ('true', 'yes', '1', 't', 'y') AS is_valid
FROM legacy_data
WHERE id IS NOT NULL;</code></pre>
                    </div>
                </div>

                <div class="challenge-box">
                    <h4>Zorluk 3: Karmasik Tarih Hesaplamalari</h4>
                    <p>Asagidakileri iceren tum etkinliklerin raporunu olusturan bir sorgu yazin:</p>
                    <ul>
                        <li>Etkinlik adi ve tarihi</li>
                        <li>Hesaplanmis bitis saati (start_time + duration)</li>
                        <li>Olusturmadan etkinlige kalan gunler</li>
                        <li>Durum: mevcut tarihe gore 'yaklasiyor', 'bugun' veya 'gecmis'</li>
                        <li>Yilin hafta numarasi</li>
                        <li>Etkinligin hafta sonuna denk gelip gelmemesi</li>
                    </ul>

                    <button class="toggle-btn" onclick="toggleSolution('challenge3')">Cozumu Goster</button>
                    <div id="challenge3" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL
SELECT
    event_name,
    event_date,
    start_time,
    start_time + duration AS end_time,

    -- Olusturmadan etkinlige kalan gunler
    event_date - created_at::DATE AS days_from_creation,

    -- Etkinlik durumu
    CASE
        WHEN event_date > CURRENT_DATE THEN 'yaklasiyor'
        WHEN event_date = CURRENT_DATE THEN 'bugun'
        ELSE 'gecmis'
    END AS status,

    -- Hafta numarasi
    EXTRACT(WEEK FROM event_date) AS week_number,

    -- Hafta sonu mu (PostgreSQL'de Cumartesi=6, Pazar=0)
    CASE
        WHEN EXTRACT(DOW FROM event_date) IN (0, 6) THEN TRUE
        ELSE FALSE
    END AS is_weekend,

    -- Referans icin gun adi
    TO_CHAR(event_date, 'Day') AS day_name
FROM events
ORDER BY event_date;

-- MySQL esdegeri
SELECT
    event_name,
    event_date,
    start_time,
    ADDTIME(start_time, SEC_TO_TIME(
        CASE
            WHEN duration LIKE '%hour%'
            THEN CAST(REGEXP_SUBSTR(duration, '[0-9]+') AS SIGNED) * 3600
            ELSE 0
        END
    )) AS end_time,

    DATEDIFF(event_date, DATE(created_at)) AS days_from_creation,

    CASE
        WHEN event_date > CURDATE() THEN 'yaklasiyor'
        WHEN event_date = CURDATE() THEN 'bugun'
        ELSE 'gecmis'
    END AS status,

    WEEK(event_date) AS week_number,

    DAYOFWEEK(event_date) IN (1, 7) AS is_weekend,

    DAYNAME(event_date) AS day_name
FROM events
ORDER BY event_date;</code></pre>
                    </div>
                </div>

                <div class="challenge-box">
                    <h4>Zorluk 4: JSON Analitigi</h4>
                    <p>user_profiles tablosunu kullanarak asagidakileri yapan bir sorgu yazin:</p>
                    <ul>
                        <li>Kullanicilari tema tercihine gore say</li>
                        <li>Kullanilan tum benzersiz dilleri listele</li>
                        <li>Bildirimleri etkin olan kullanicilarin yuzdesini goster</li>
                        <li>Ozel/standart olmayan tercihleri olan kullanicilari belirle (3'ten fazla anahtar)</li>
                    </ul>

                    <button class="toggle-btn" onclick="toggleSolution('challenge4')">Cozumu Goster</button>
                    <div id="challenge4" class="solution-box">
                        <pre><code class="language-sql">-- PostgreSQL

-- Kullanicilari temaya gore say
SELECT
    preferences->>'theme' AS theme,
    COUNT(*) AS user_count
FROM user_profiles
GROUP BY preferences->>'theme';

-- Benzersiz dilleri listele
SELECT DISTINCT preferences->>'language' AS language
FROM user_profiles
WHERE preferences->>'language' IS NOT NULL;

-- Bildirimleri etkin olanlarin yuzdesi
SELECT
    ROUND(
        100.0 * SUM(CASE WHEN (preferences->>'notifications')::BOOLEAN THEN 1 ELSE 0 END)
        / COUNT(*),
        2
    ) AS notification_percentage
FROM user_profiles;

-- 3'ten fazla tercih anahtari olan kullanicilar (ozel tercihler)
SELECT
    username,
    preferences,
    jsonb_object_keys(preferences) AS keys
FROM user_profiles
WHERE (
    SELECT COUNT(*)
    FROM jsonb_object_keys(preferences)
) > 3;

-- Veya daha zarif:
SELECT
    username,
    preferences,
    jsonb_array_length(jsonb_path_query_array(preferences, '$.keyvalue()')) AS key_count
FROM user_profiles
HAVING jsonb_array_length(jsonb_path_query_array(preferences, '$.keyvalue()')) > 3;

-- Birlesik analitik raporu
SELECT
    (SELECT jsonb_object_agg(theme, cnt)
     FROM (SELECT preferences->>'theme' AS theme, COUNT(*) AS cnt
           FROM user_profiles GROUP BY 1) t) AS themes_breakdown,

    (SELECT jsonb_agg(DISTINCT preferences->>'language')
     FROM user_profiles) AS languages,

    (SELECT ROUND(100.0 * AVG(CASE WHEN (preferences->>'notifications')::BOOLEAN
                                   THEN 1 ELSE 0 END), 2)
     FROM user_profiles) AS notification_percentage;</code></pre>
                    </div>
                </div>
            </section>

            <!-- Onemli Noktalar -->
            <section>
                <h2 id="key-takeaways">Onemli Noktalar</h2>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Kavram</th>
                            <th>En Iyi Uygulama</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Finansal Veri</td>
                            <td>Her zaman <code>DECIMAL</code> veya <code>NUMERIC</code> kullanin, asla
                                <code>FLOAT</code> degil</td>
                        </tr>
                        <tr>
                            <td>Sabit Uzunluklu Kodlar</td>
                            <td><code>CHAR(n)</code>'i sadece uzunluk her zaman tam olarak n oldugunda kullanin</td>
                        </tr>
                        <tr>
                            <td>Degisken Metin</td>
                            <td>Makul sinirlarla <code>VARCHAR(n)</code> veya sinirsiz icin <code>TEXT</code> kullanin
                            </td>
                        </tr>
                        <tr>
                            <td>Zaman Damgalari</td>
                            <td><code>TIMESTAMP WITH TIME ZONE</code> kullanin ve UTC'de saklayin</td>
                        </tr>
                        <tr>
                            <td>Boolean Degerler</td>
                            <td>Dizeler veya tamsayilar degil, yerel <code>BOOLEAN</code> tipi kullanin</td>
                        </tr>
                        <tr>
                            <td>Yari Yapilandirilmis Veri</td>
                            <td>Duzgun indekslemeyle <code>JSONB</code> (PostgreSQL) veya <code>JSON</code> tipi
                                kullanin</td>
                        </tr>
                        <tr>
                            <td>Otomatik Olusturulan ID'ler</td>
                            <td><code>IDENTITY</code> sutunlari veya dagitik sistemler icin <code>UUID</code> kullanin
                            </td>
                        </tr>
                        <tr>
                            <td>Tip Donusumleri</td>
                            <td>Ortuk donusum surprizlerinden kacinmak icin acik <code>CAST()</code> kullanin</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Navigasyon -->
            <section>
                <p><a href="02_common_sql_data_types.html">&larr; Yaygin SQL Veri Tipleri Dersine Don</a></p>
            </section>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="../static/script.js"></script>

    <script>
        function toggleSolution(id) {
            var element = document.getElementById(id);
            if (element.classList.contains('show')) {
                element.classList.remove('show');
                event.target.textContent = 'Cozumu Goster';
            } else {
                element.classList.add('show');
                event.target.textContent = 'Cozumu Gizle';
            }
        }
    </script>
</body>

</html>
